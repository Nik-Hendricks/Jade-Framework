(()=>{"use strict";const t=new class{constructor(){this.events=[]}on(t,e){return"function"!=typeof e?(console.error("The listener callback must be a function, the given type is "+typeof e),!1):"string"!=typeof t?(console.error("The event name must be a string, the given type is "+typeof t),!1):(void 0===this.events[t]&&(this.events[t]={listeners:[]}),void this.events[t].listeners.push(e))}removeListener(t,e){if(void 0===this.events[t])return console.error(`This event: ${t} does not exist`),!1;this.events[t].listeners=this.events[t].listeners.filter((t=>t.toString()!==e.toString()))}dispatch(t,e){if(void 0===this.events[t])return console.error(`This event: ${t} does not exist`),!1;this.events[t].listeners.forEach((t=>{t(e)}))}};window.DP=t,window.DP;var e=[],n=[];function i(t,e,n){return new Promise((i=>{var s={method:n,headers:{"Content-Type":"application/json"}};"POST"==n&&(s.body=JSON.stringify(e)),fetch(`${t}`,s).then((t=>t.json())).then((t=>{i(t)}))}))}function s(){return new Promise((t=>{e.events.find({},((e,n)=>{t(n)}))}))}function a(t,e){var n=[];e=function(t){for(var e=0,n=t.length-1;e<t.length&&" "==t[e];)e++;for(;n>e&&" "==t[n];)n-=1;return t.substring(e,n+1)}(e).toLowerCase();for(var i=0;i<t.length;i++)for(var s in t[i])-1!=String(t[i][s]).toLowerCase().indexOf(e)&&(r(n,t[i])||n.push(t[i]));return n}function o(t,e){var n="";for(n in t)if(t[n]!=e[n])return!1;for(n in e)if(t[n]!=e[n])return!1;return!0}function r(t,e){for(var n=0;n<t.length;n++)if(o(t[n],e))return!0;return!1}function c(t){console.log(t);var e=[],n=0;for(var i in t){n++;var s=t[i];if(s.subViews)for(var a in subViews)e.push(c(s.subViews[a]));else console.log(s),e.push({url:"",view:s.view});if(n==t.length-1)return console.log("YES"+e),e}}setTimeout((()=>{s().then((t=>{n=t,console.log(t),window.DP.dispatch("API_LOAD")}))}),350);const l={get dbs(){return e},get_db:t=>e[t],getCookie:t=>function(t){let e=t+"=",n=document.cookie.split(";");for(let t=0;t<n.length;t++){let i=n[t];for(;" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""}(t),setCookie(t,e){!function(t,e,n){const i=new Date;i.setTime(i.getTime()+NaN);let s="expires="+i.toUTCString();document.cookie=t+"="+e+";"+s+";path=/"}(t,e)},reloadAPI(){reloadAPI()},uniqid:(t="",e=!1)=>`${t}${(1e3*Date.now()+1e3*Math.random()).toString(16).replace(/\./g,"").padEnd(14,"0")}${e?`.${Math.trunc(1e8*Math.random())}`:""}`,in_array(t,e){for(var n in e)if(e[n]=t)return!0;return!1},remote_log(t,e){i("/API/remote_log",{title:t,data:e},"POST").then((t=>{}))},register_service_worker(){console.log("service worker registration"),"serviceWorker"in navigator&&navigator.serviceWorker.register("/worker").then((function(t){console.log("ServiceWorker registration successful with scope: ",t.scope)}),(function(t){console.log("ServiceWorker registration failed: ",t)}))},getMobileOperatingSystem(){return t=navigator.userAgent||navigator.vendor||window.opera,/windows phone/i.test(t)?"Windows Phone":/android/i.test(t)?"Android":/iPad|iPhone|iPod/.test(t)&&!window.MSStream?"iOS":"unknown";var t},toggle_array:(t,e)=>function(t,e){var n=t,i=[e];return 0==t.length?(n.push(e),n):(t.includes(e)?n=n.filter((t=>!i.includes(t))):n.push(e),n)}(t,e),evaluate:t=>new Promise((e=>{(function(t){return new Promise((e=>{encodeURIComponent(t),i("http://api.mathjs.org/v4",{expr:t},"POST").then((t=>{console.log(t),e(t)}))}))})(t).then((t=>{e(t)}))})),new_db(t){!function(t){e[t]=new Nedb({filename:`${t}.db`,autoload:!0})}(t)},get events_db(){return new Promise((t=>{s().then((e=>{t(e)}))}))},get events(){return n},get_event(t){return new Promise((e=>{this.dbs.events.findOne({_id:t},((t,n)=>{e(n)}))}))},new_event(t,e,n,i,s,a,o,r){return new Promise((r=>{this.dbs.events.insert({name:t,type:e,start_time:n,end_time:i,notes:a,color:o,days:s},((t,e)=>{t?r({error:t}):e&&r(e)}))}))},async get_day_events(t){var e=t||(new Date).getDay();return new Promise((t=>{var n=[];this.events_db.then((i=>{i?(i.forEach((t=>{t.days.includes(Number(e))&&n.push(t)})),t(n)):t({error:"no events"})}))}))},global_search:(t,n)=>new Promise((i=>{(function(t,n){return new Promise((i=>{!function(t){for(var e in t)console.log(c(t[e]))}(window.VM.routes);var s=["events"],o=0,r=[];for(var l in n)s.includes(n[l])&&e[n[l]].find({},((e,s)=>{a(s,t).forEach((t=>{r.push(t)})),console.log(r),o==n.length&&(console.log("done"),i(r))})),o++}))})(t,n).then((t=>{i(t)}))})),get_news:t=>new Promise((e=>{(function(t){return new Promise((e=>{i("/API/get_news",{query:t},"POST").then((t=>{e(t)}))}))})(t).then((t=>{e(t)}))}))},d=l;window.API2=d,window.API2;var h=document.getElementsByTagName("main-content")[0],u=document.getElementsByTagName("menu-bar-top")[0],m=document.getElementsByTagName("menu-bar-bottom")[0],p={},_=location.href;function g(t){u.setAttribute("title",t),document.getElementsByTagName("title")[0].textContent=t}function w(t){var e,n;if(1==t.length)p[t[0]]?(e=p[t[0]].view,g(n=p[t[0]].title)):window.history.back();else{for(var i,s=p[t[0]],a=[],o=0;o<t.length;o++)i=s,0==o?s=i:null==s?(console.log(a),s=a[1].subViews["*"].subViews[t[o]]):s=s.subViews[t[o]],a.push(s);null==s?i.subViews["*"]?(e=i.subViews["*"].view,n=i.subViews["*"].title):i.subViews["*"]||window.history.back():(e=s.view,n=s.title)}g(n),h.innerHTML=e,function(t){window.localStorage.lastView=t}(e),"iOS"==window.API2.getMobileOperatingSystem()&&1==window.navigator.standalone&&(document.body.style.paddingTop="40px",h.style.marginTop="40px")}function v(){_=location.href,setInterval((function(){_!=location.href&&(window.loadingSpinner.show(),_=location.href,y(2))}),100)}function y(t){for(var e=_.slice(_.indexOf("/")+1,_.length).split("/"),n=[],i=t;i<e.length;i++)n.push(e[i]);w(n)}function b(){document.getElementsByClassName("view")[0].resizeComponents()}const f={main_content_div:h,global_el_division:12,current_view:void 0,get routes(){return p},register(t){p=t,console.log(p)},_setView(t,e){w(t)},_URL_LISTENER(){v()},get_view_from_url(){y(2)},set_title(t){g(t)},set_theme_property(t,e){!function(t,e){document.documentElement.style.setProperty(t,e)}(t,e)},add_bottom_button(t,e){!function(t,e){m.add_item(t,e)}(t,e)},begin(){v(),y(2),window.onresize=()=>{b()}},resize_components(){b()}};window.VM=f,window.VM;const x={daily_schedule_row_item(t,e){var n=window.Utils.format_time(t.start_time),i=window.Utils.format_time(t.end_time);console.log(e);var s=null!=e?e:"var(--theme-background-color)";return`\n        <card-item width="4" style="max-height:37px; background:${s};">\n            <p style="padding:0; margin:0; margin-bottom:10px; color:${t.color};text-align:center; font-size: 14px;">${t.name}</p>\n        </card-item>\n        <card-item width="3" style="max-height:37px; background:${s};">\n            <p style="padding:0; margin:0; margin-bottom:10px; color:${t.color};text-align:center; font-size: 14px;">${n}</p>\n        </card-item>\n        <card-item width="3" style="max-height:37px; background:${s};">\n            <p style="padding:0;  margin:0;margin-bottom:10px; color:${t.color};text-align:center; font-size: 14px;">${i}</p>\n        </card-item>\n        <card-item width="2" style="max-height:37px; background:${s};">\n            <span class="material-icons" style="margin:0; margin-left:50%; left:-7px; font-size:14px; position:relative; margin-bottom:10px;color:var(--theme-primary-color);">\n            info\n            </span>\n        </card-item>`},big_pie_chart_card:()=>'<card-item width="12">\n                            <card-item width="6" square blank>\n                                <pie-chart></pie-chart>\n                            </card-item>\n                            <card-item width="6" blank>\n                                <custom-input style="background:var(--theme-background-color);" type="button" icon="info" text="Event Type"></custom-input>\n                                <custom-input style="background:var(--theme-background-color);" type="button" icon="info" text="Event Time"></custom-input>\n                                <custom-input style="background:var(--theme-background-color);" type="button" icon="info" text="Event Day"></custom-input>\n                                <custom-input style="background:var(--theme-background-color);" type="button" icon="info" text="test"></custom-input>\n                            </card-item>\n                        </card-item>',square_card_item:(t,e)=>`   <card-item width="4" square>\n                                <h1 style="margin:0; width:100%; float:left; position:absolute; text-align:center; height:40px; font-size:40px; margin-top:50%; top:-30px; color:var(--theme-primary-color);">${t}</h1>\n                                <p style="margin:0; width:100%; text-align:center; float:left; position:absolute; bottom:var(--global-margin);">${e}</p>\n                            </card-item>`};window.Builder=x,window.Builder;const k={format_time(t){if(t.length>3)var e=t.slice(0,2),n=t.slice(2,4);else e=t.slice(0,1),n=t.slice(1,3);return e>12?String(e-12).concat(":",n," PM"):String(e).concat(":",n," AM")},nth(t){if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}};window.Utils=k,window.Utils;class E extends HTMLElement{get_root_child(){for(this.t_e=this;0!=this.traverse_child(this.t_e);)this.traverse_child(this.t_e);return this.t_e}traverse_child(t){var e=t.children;return!!e.length&&(this.t_e=e[0],e[0])}resizeComponent(t){var e,n,i=this.tagName.toLowerCase(),s=window.VM.global_el_division,a=this.parentElement.classList.contains("sidescroller-content")?window.VM.main_content_div.offsetWidth:this.parentElement.offsetWidth,o=this.hasAttribute("nomargin")?0:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--global-margin").split("px")[0]),r=a/s,c=this.hasAttribute("width")?parseInt(this.getAttribute("width")):12,l=t?c*r-o-o/t:c*r-o-o/1;this.style.width=`${l}px`,this.style.float="left",this.style.position="relative",this.style.display="block",this.hasAttribute("image")&&(this.style.backgroundImage=`url(${this.getAttribute("image")})`,this.style["background-size"]=`${l}px ${l}px`,"card-item"==i&&(this.style.height=`${this.getBoundingClientRect().width}px`)),"pie-chart"==i&&this.chartify(this.data),this.is_square&&(this.style.height=`${this.getBoundingClientRect().width}px`),this.offsetWidth<=80&&("dropdown"==this.getAttribute("type")&&(e=this.button_text,n=this.button_icon),e=this.getElementsByTagName("p")[0],n=this.getElementsByTagName("span")[0],e&&n&&(e.style["font-size"]="15px",e.style.display="none",this.style.paddingLeft="0",n.style.position="absolute",n.style.marginLeft="50%",n.style.left="-8px",this.division>=5&&(e.style["font-size"]="11px")))}async get_rows(){return new Promise((t=>{for(var e=this.getElementsByClassName("global-resize"),n=0,i=[],s=[],a=0;a<e.length;a++){var o=e[a],r=o.hasAttribute("width")?Number(o.getAttribute("width")):12;s.push(o),(n+=r)>=window.VM.global_el_division&&(i.push(s),s=[],n=0),a==e.length-1&&(i.push(s),t(i))}}))}resizeComponents(t){if(this.row_map){if(1==t)return this.row_map=void 0,void this.resizeComponents();this.row_map.forEach((t=>{t.forEach((e=>{e.resizeComponent(t.length)}))}))}else this.get_rows().then((t=>{this.row_map=t,t.forEach((t=>{t.forEach((e=>{e.resizeComponent(t.length)}))}))}))}}window.customElements.define("menu-bar-bottom",class extends E{constructor(){super()}connectedCallback(){window.DP.on("API_LOAD",(()=>{this.item_count=0,this.classList.add("menu-bar-bottom")}))}add_item(t,e){this.item_count++;var n=document.createElement("div"),i=document.createElement("span");n.classList.add("header-center-button-container"),i.classList.add("header-center-button","material-icons"),i.innerText=t,n.onclick=()=>{window.history.pushState("","",e)},n.append(i),this.append(n);for(var s=0;s<this.item_count;s++)this.getElementsByTagName("div")[s].style.width=`calc(100% / ${this.item_count})`}}),window.customElements.define("menu-bar-top",class extends E{static get observedAttributes(){return["title"]}constructor(){super(),this.title=this.getAttribute("title")}connectedCallback(){this.classList.add("menu-bar-top"),this.update()}attributeChangedCallback(t,e,n){"title"==t&&this.update()}update(){this.innerHTML=`  <span class="material-icons-outlined back" onclick="window.history.back()">\n                                        arrow_back_ios\n                                    </span>\n                                    <h1>${this.title}</h1>\n                                    <span class="material-icons-outlined search">\n                                        search\n                                    </span>`,this.getElementsByClassName("back")[0].onclick=()=>{window.history.back()},this.getElementsByClassName("search")[0].onclick=()=>{this.search_content(),this.resizeComponents(!0)}}search_content(){this.innerHTML='  <custom-input blank width="2" type="button" icon="arrow_back_ios" text="" style="margin-top:12.5px;"></custom-input>\n                            <custom-input blank width="10" type="text" placeholder="Search anything..." style="margin-top:12.5px;"></custom-input>\n                            <card-item width="12" blank></card-item>\n                            ',this.back_button=this.getElementsByTagName("custom-input")[0],this.search_textbox=this.getElementsByTagName("custom-input")[1],this.search_results_container=this.getElementsByTagName("card-item")[0],this.search_textbox.focus(),this.search_textbox.onkeydown=t=>{window.API2.global_search(this.search_textbox.textContent,["events"]).then((t=>{t.length>0?this.show_search_result(t):this.hide_search_result()}))},this.back_button.onclick=()=>{this.update()}}append_search_results(t){this.search_results_container.innerHTML="",t.forEach((t=>{this.search_results_container.innerHTML+=this.search_result(t)}))}search_result(t){return`    <div onclick="window.history.pushState('','','/Data/Event/${t._id}')">\n                        <card-item width="2" style="height:40px; background-color:var(--theme-secondary-color);">\n                            <span class="material-icons" style="width:100%; margin-top:0px; height:100%; text-align:center; font-size:18px; color:white;">article</span>\n                        </card-item>\n                        <card-item width="10" style="background-color:var(--theme-background-color); height:40px;">\n                            <p style="padding:0; margin:0; margin-top:0px; text-align:center;">${t.name}</p>\n                        </card-item>\n                    </div>`}show_search_result(t){this.search_results_container.removeAttribute("blank"),this.append_search_results(t),this.search_results_container.style["z-index"]=99,this.search_results_container.style["box-shadow"]="5px 5px 5px var(--theme-background-color)",this.search_results_container.style.backgroundColor="var(--theme-card-color)",this.resizeComponents(!0)}hide_search_result(){this.search_results_container.innerHTML="",this.search_results_container.setAttribute("blank","true"),this.search_results_container.style["z-index"]=-1,this.search_results_container.style.backgroundColor="transparent"}});class L extends HTMLElement{constructor(){super()}connectedCallback(){this.innerHTML=""}}window.customElements.define("main-content",L);class T extends HTMLElement{constructor(){super(),this.initialHTML='<div id="loading"></div>'}connectedCallback(){this.classList.add("loading-spinner"),window.loadingSpinner=this,this.innerHTML=this.initialHTML}hide(){this.innerHTML=""}show(){this.innerHTML=this.initialHTML}}window.customElements.define("loading-spinner",T),window.customElements.define("side-scroller",class extends E{constructor(){super(),this.classList.add("sidescroller"),this.initialHTML='\n                            <div class="sidescroller-content">\n                            </div>\n                            '}connectedCallback(){var t=this.innerHTML;this.innerHTML=this.initialHTML,this.root_el=this.get_root_child(),this.root_el.innerHTML=t,setTimeout((()=>{for(var t=this.root_el.children,e=0,n=0;n<t.length;n++)e+=t[n].getBoundingClientRect().width,n==t.length-1&&(this.getElementsByClassName("sidescroller-content")[0].style.width=`calc(${e}px + calc(${t.length} * var(--global-margin)))`)}),50),this.addEventListener("wheel",(t=>{t.preventDefault(),this.scrollLeft+=t.deltaY}))}}),window.customElements.define("card-item",class extends E{static get observedAttributes(){return["variant"]}constructor(){super()}connectedCallback(){this.classList.add("global-resize"),this.width=this.getAttribute("width"),this.secondary=this.getAttribute("secondary"),this.variant=this.getAttribute("variant"),this.has_image=!!this.hasAttribute("image"),this.is_blank=!!this.hasAttribute("blank"),this.is_square=!!this.hasAttribute("square"),this.init()}init(){this.clasify()}clasify(){var t=["card","card-2","icon-card"];this.variant?this.variant_class=t[parseInt(this.variant)]:this.variant_class=t[0],this.is_blank&&(this.style.background="transparent"),this.classList.add(this.variant_class)}attributeChangedCallback(t,e,n){"variant"==t&&this.clasify()}});class C extends HTMLElement{constructor(){super(),this.icon=this.getAttribute("icon"),this.button_color_classes={delete:"red"}}connectedCallback(){this.innerHTML=`<span class="material-icons icon-button ${this.button_color_classes[this.icon]}">\n                                ${this.icon}\n                            </span>`}}window.customElements.define("icon-button",C),window.customElements.define("grid-container",class extends E{connectedCallback(){this.classList.add("grid-container");var t=this.innerHTML;this.innerHTML="",this.root_el=this.get_root_child(),this.root_el.innerHTML=t}}),window.customElements.define("image-slider",class extends E{constructor(){super(),this.initialHTML='\n                        <div class="images">\n                        </div>\n                    '}connectedCallback(){this.classList.add("image-slider");var t=this.innerHTML;this.innerHTML=this.initialHTML,this.root_el=this.get_root_child(),this.root_el.innerHTML=t;var e=this.getElementsByTagName("div")[0];console.log(e)}}),window.customElements.define("list-item",class extends E{constructor(){super()}connectedCallback(){this.classList.add("list-item"),this.icon=this.getAttribute("icon"),this.text=this.getAttribute("text"),this.icon.includes("fa-")?this.initialHTML=`\n                                    <i class="${this.icon} "></i>\n                                    <p class="right">${this.text}</p> \n                                    <span class="right material-icons-outlined">navigate_next</span>\n                                `:this.initialHTML=`\n                                    <span class="material-icons">${this.icon}</span>\n                                    <p class="right">${this.text}</p> \n                                    <span class="right material-icons-outlined">navigate_next</span>\n                                `,this.innerHTML=this.initialHTML,this.root_el=this.get_root_child()}}),window.customElements.define("post-card",class extends E{static get observedAttributes(){return["content","primary"]}constructor(){super()}connectedCallback(){this.classList.add("post-card"),this.type=this.getAttribute("type"),this.content=`<h1>${this.getAttribute("content")}</h1>`,this.author_public_uniqid=this.getAttribute("author_public_uniqid"),this.attachments=[],this.update()}update(){window.API2.get_user(this.author_public_uniqid).then((t=>{this.post_html=`  <post-card-header username="${t.username}" image_url="https://via.placeholder.com/150"></post-card-header>\n                                <textarea rows="11" placeholder="Comment"></textarea>\n                                <custom-button icon="add" text="Post" style="float:unset; bottom:10px;"></custom-button>`,"post"==this.type?this._HTML=this.post_html:this._HTML=`  <post-card-header username="${t.username}" image_url="https://via.placeholder.com/150"></post-card-header>\n                                    ${this.content}\n                                <post-card-footer likes="" comments=""></post-card-footer>`,this.innerHTML=this._HTML,this.post_card_header=this.getElementsByTagName("post-card-header")[0],this.post_card_footer=this.getElementsByTagName("post-card-footer")[0],this.post_card_footer.like_button.onclick=()=>{},this.post_card_footer.comment_button.onclick=()=>{this.innerHTML=this.post_html}}))}attributeChangedCallback(t,e,n){console.log(t),this.update()}}),window.customElements.define("context-menu",class extends E{constructor(){super()}connectedCallback(){this.classList.add("context-menu")}}),window.customElements.define("code-format",class extends E{constructor(){super()}connectedCallback(){this.text_content=String(this.innerHTML),console.log(this.text_content),this.innerText=this.text_content,this.classList.add("code-format")}});class M extends E{}window.customElements.define("music-player",class extends M{constructor(){super()}connectedCallback(){this.classList.add("music-player"),this.innerHTML='\n                            <span class="material-icons">\n                                skip_previous\n                            </span>\n                            <span class="material-icons">\n                                play_arrow\n                            </span>\n                            <span class="material-icons">\n                                fast_forward\n                            </span>\n                            <slider-input></slider-input>\n                            '}}),window.customElements.define("slider-input",class extends E{constructor(){super()}connectedCallback(){this.classList.add("slider-input"),this.innerHTML='\n                            <input type="range" min="1" max="100" value="50">\n                            '}}),window.customElements.define("sql-editor",class extends E{constructor(){super()}connectedCallback(){this.classList.add("sql-editor"),this.innerHTML='<card-item variant="1">\n                            <div class="line-number-container">\n                                <p>1</p>\n                                <p>2</p>\n                            </div>\n                            <div class="textarea-container">\n                                <textarea rows="6"></textarea>\n                            </div>\n                         </card-item>\n                         </br>\n                         <custom-button division="2" icon="play_arrow" text="Run"></custom-button>\n                         <custom-button division="2" icon="restart_alt" text="Reset"></custom-button>\n                         </br>\n                         </br>\n                         <card-item variant="1" class="output">\n                            \n                         </card-item>\n                         ',this.line_counter=this.getElementsByClassName("line-number-container")[0],this.sql_textarea=this.getElementsByTagName("textarea")[0],this.run_button=this.getElementsByTagName("custom-button")[0],this.reset_button=this.getElementsByTagName("custom-button")[1],this.output_card=this.getElementsByTagName("card-item")[1],this.reset_button.onclick=()=>{this.sql_textarea.value="",this.update_line_count(),this.output_card.innerHTML=""},this.run_button.onclick=()=>{this.output_card.innerHTML="";var t=this.sql_textarea.value;window.API2.send_sql(t).then((t=>{t.success&&this.construct_table(t.success)}))},this.update_line_count()}update_line_count(){this.line_counter.innerHTML="",this.sql_textarea.oninput=()=>{this.update_line_count()};for(var t=this.sql_textarea.value.split(/\r|\r\n|\n/).length,e=0;e<t;e++)this.line_counter.innerHTML+=`<p>${e+1}</p>`}construct_table_head(t,e){}construct_table(t){console.log(t);var e=Object.keys(t[0]),n=document.createElement("table"),i=n.insertRow();e.forEach((t=>{i.insertCell().innerHTML+=`<b class="theme-primary-color">${t}</b>`}));for(var s=0;s<t.length;s++){var a=n.insertRow();for(var o in console.log(t[s]),t[0])console.log(t[s][o]),a.insertCell().appendChild(document.createTextNode(t[s][o]))}this.output_card.append(n)}}),String.prototype.insert=function(t,e){return t>0?this.substring(0,t)+e+this.substr(t):e+this},window.customElements.define("custom-calculator",class extends E{constructor(){super()}connectedCallback(){for(var t in this.buttons={_AC:{onclick:()=>{this.calculator_output.value=""}},_rad:{onclick:t=>{this.calc_mode_toggle(t)}},"_%":{onclick:()=>{this.calculator_output.value+=" % "}},"_/":{onclick:()=>{this.calculator_output.value+=" / "}},_7:{onclick:()=>{this.calculator_output.value+="7"}},_8:{onclick:()=>{this.calculator_output.value+="8"}},_9:{onclick:()=>{this.calculator_output.value+="9"}},"_*":{onclick:()=>{this.calculator_output.value+=" * "}},_4:{onclick:()=>{this.calculator_output.value+="4"}},_5:{onclick:()=>{this.calculator_output.value+="5"}},_6:{onclick:()=>{this.calculator_output.value+="6"}},"_-":{onclick:()=>{this.calculator_output.value+=" - "}},_1:{onclick:()=>{this.calculator_output.value+="1"}},_2:{onclick:()=>{this.calculator_output.value+="2"}},_3:{onclick:()=>{this.calculator_output.value+="3"}},"_+":{onclick:()=>{this.calculator_output.value+=" + "}},_0:{onclick:()=>{this.calculator_output.value+="0"}},"_.":{onclick:()=>{this.calculator_output.value+="."}},"_=":{onclick:()=>{var t=this.calculator_output.value.toLowerCase(),e=t.split("resin(").join("asin(");"deg"==this.calc_mode&&(e=e.replace(/\d+(?:\.\d+)?/g,(t=>`(${t} deg )`))),console.log(e),window.API2.evaluate(e).then((e=>{e.result&&(this.calculator_history.innerHTML+=`<div class="history-item"><p class="primary">${t}</p><p class="secondary">${e.result}</p><p class="calculator-mode">${this.calc_mode}</p></div><hr>`,localStorage.setItem(t,[e.result,this.calc_mode]))}))},class:"double"}},this.calc_mode="rad",this.innerHTML='<input id="calculator-output" class="calculator-output" type="text"/>\n                            <div id="calculator" class="calculator">\n\n                            </div>\n                            <div id="calculator-history" class="calculator-history">\n                            </div>\n                            ',this.calculator=document.getElementById("calculator"),this.calculator_output=document.getElementById("calculator-output"),this.calculator_history=document.getElementById("calculator-history"),this.buttons){var e=document.createElement("div");e.classList.add("calculator-btn"),this.buttons[t].class&&e.classList.add(this.buttons[t].class),e.onclick=this.buttons[t].onclick,e.innerHTML=`<p>${t.slice(1)}</p>`,this.calculator.appendChild(e)}}calc_mode_toggle(t){"deg"==this.calc_mode?this.calc_mode="rad":this.calc_mode="deg",t.path[0].innerHTML=this.calc_mode}grab_numbers_from_string(t){return t.match(/\d+/g)}is_numeric(t){return/^\d+$/.test(t)}});var A=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];class N{constructor(t){var e=String(t);this._day=e.slice(0,3),this._day_num=Number(e.slice(8,10)),this._month=e.slice(4,7).toLowerCase(),this._month_num=Number(A.indexOf(this.month)+1),this._year=Number(e.slice(11,15)),this._min=Number(e.slice(19,21)),this._hour=Number(e.slice(16,18))}set day(t){this._day=Number(t)}get day(){return this._day}set day_num(t){this._day_num=Number(t),console.log(this.date_string(t,this._month_num,this._year)),this._day=String(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(this.date_string(t,this._month_num,this._year)).getDay()])}get day_num(){return this._day_num}set month(t){this._month=String(t).toLowerCase(),this._month_num=Number(A.indexOf(this._month)+1)}get month(){return this._month}set month_num(t){this._month_num=Number(t),this._month=String(A[this._month_num]).toLowerCase()}get month_num(){return this._month_num}set year(t){this._year=Number(t)}get year(){return this._year}set min(t){this._min=Number(t)}get min(){return this._min}set hour(t){this._hour=Number(t)}get hour(){return this._hour}date_string(t,e,n){return`${e}/${t}/${n}`}}window.customElements.define("custom-calendar",class extends E{constructor(){super()}connectedCallback(){this.classList.add("calendar"),this.week_days=["sun","mon","tue","wed","thu","fri","sat"],this.selected_date=new N(new Date),this.cal_data=this.construct_initial_date_array(),this.innerHTML='\n                        <div class="calendar-controls">\n                            <span class="material-icons prev-month">navigate_before</span>\n                            <p class="title"></p>\n                            <span class="material-icons next-month">navigate_next</span>\n                        </div>\n                        <div class="calendar-cols">\n                        </div>\n                        <div class="day-container">\n                        </div>\n                        <div class="date-info-container">\n                        </div>\n                        ',this.calendar_title=this.getElementsByClassName("title")[0],this.calendar_day_container=this.getElementsByClassName("day-container")[0],this.calendar_cols=this.getElementsByClassName("calendar-cols")[0],this.next_button=this.getElementsByClassName("next-month")[0],this.prev_button=this.getElementsByClassName("prev-month")[0],this.date_info_container=this.getElementsByClassName("date-info-container")[0],this.open_calendar(),this.next_button.onclick=()=>{this.selected_date.month_num=this.selected_date.month_num+1>11?0:this.selected_date.month_num+1,this.open_calendar(this.selected_date.month),this.fire_month_change_event()},this.prev_button.onclick=()=>{this.selected_date.month_num=this.selected_date.month_num-1<0?11:this.selected_date.month_num-1,this.open_calendar(this.selected_date.month),this.fire_month_change_event()}}open_calendar(t){var e=t||this.selected_date.month;this.construct_calendar(e)}highlight_dates(t,e){var n=e||this.selected_date.month;return new Promise((async e=>{if(t[n]){var i=t[n];for(var s in this.cal_data[n]=i,i){var a=Number(s),o=String(i[s].color);this.highlight_day(a,o,n)}return e()}}))}fire_month_change_event(){var t=document.createEvent("HTMLEvents");t.initEvent("monthChange",!0,!0),t.eventName="monthChange",this.dispatchEvent(t)}construct_calendar(t){return new Promise((async e=>{var n=this.selected_date.month,i=A.indexOf(n);t&&(n=t,i=A.indexOf(n)+1),this.set_calendar_title(n),this.append_calendar_days(i,2022).then((t=>e(t)))}))}append_calendar_days(t,e){return new Promise((async n=>{this.first_day_offset=this.get_first_day_offset(t-1),this.days_in_month=Number(new Date(e,t,0).getDate()),this.calendar_cols.innerHTML="",this.calendar_day_container.innerHTML="";for(var i=0;i<this.week_days.length;i++)this.calendar_cols.innerHTML+=`<p>${this.week_days[i]}</p>`;for(i=0;i<this.first_day_offset;i++)this.append_day();for(i=1;i<=this.days_in_month;i++)this.append_day(i);return n(this.calendar_day_container.children)}))}set_calendar_title(t){this.calendar_title.innerHTML=t}get_first_day_offset(t){var e=new Date(this.selected_date.year,t,1).toString().slice(0,3).toLowerCase();return this.week_days.indexOf(e)}prepend_day(){var t=document.createElement("div");t.classList.add("calendar-day","secondary"),this.calendar_day_container.prepend(t)}append_day(t){var e=document.createElement("div");t?(e.classList.add("calendar-day"),e.innerHTML=`<p>${t}</p>`):e.classList.add("calendar-day","secondary"),this.calendar_day_container.append(e)}get_month(t){return A[t]}outline_day(t){var e=parseInt(t+this.first_day_offset-1);this.calendar_day_container.getElementsByClassName("calendar-day")[e].classList.add("outline")}highlight_day(t,e,n){n||(n=this.selected_date.month),this.cal_data[n][t]={color:e};var i=this.get_first_day_offset(A.indexOf(n)),s=parseInt(t+i-1);this.calendar_day_container.getElementsByClassName("calendar-day")[s].style.backgroundColor=e}clear_day_highlights(){for(var t=this.calendar_day_container.getElementsByClassName("calendar-day"),e=0;e<t.length;e++)t[e].style.backgroundColor=""}clear_day_highlight(t,e){var n=e||this.selected_date.month,i=this.get_first_day_offset(A.indexOf(n)),s=parseInt(t+i-1);this.calendar_day_container.getElementsByClassName("calendar-day")[s].style.backgroundColor=""}on_date_clicked(t){var e="ontouchstart"in window?"touchstart":"click";this.addEventListener(e,(e=>{var n=e.target.parentNode;"calendar-day"==n.className&&(this.selected_date.day_num=n.innerText,t(this.selected_date))}))}on_month_changed(t){this.addEventListener("monthChange",(()=>{t(this.selected_date)}))}toggle_highlight(t,e,n){var i=n||this.selected_date.month,s=this.calendar_day_container.getElementsByClassName("calendar-day")[t];"rgb(112, 111, 211)"!=window.getComputedStyle(s,null).getPropertyValue("background-color")?this.clear_day_highlight(t,i):this.highlight_day(t,e)}construct_initial_date_array(){return{jan:{},feb:{},mar:{},apr:{},may:{},jun:{},jul:{},aug:{},sep:{},oct:{},nov:{},dec:{}}}}),window.customElements.define("post-card-header",class extends E{constructor(){super()}connectedCallback(){this.classList.add("post-card-header"),this.username=this.getAttribute("username"),this.image_url=this.getAttribute("image_url"),this.innerHTML=`   \n                            <img src="${this.image_url}"></img>\n                            <p class="username">${this.username}</p>\n                            <trophy-chip></trophy-chip>\n                            `}}),window.customElements.define("post-card-footer",class extends E{constructor(){super()}connectedCallback(){this.classList.add("post-card-footer"),this.likes=this.getAttribute("likes"),this.comments=this.getAttribute("comments"),this.innerHTML='   <custom-button division="2" rel="true" icon="chat" text="Comments"></custom-button>\n                            <custom-button division="2" rel="true" icon="thumb_up" text="Like"></custom-button>',this.comment_button=this.getElementsByTagName("custom-button")[0],this.like_button=this.getElementsByTagName("custom-button")[1]}}),window.customElements.define("custom-input",class extends E{constructor(){super()}get value(){return this._value}set value(t){this._value=t,"dropdown"==this.type&&(this.button_text.textContent=t,event=document.createEvent("HTMLEvents"),event.initEvent("change",!0,!0),event.eventName="change",this.dispatchEvent(event)),"color"==this.type&&(this.getElementsByClassName("material-icons")[0].style.color=this.value)}set items(t){this._items=t,this._append_dropdown_items()}connectedCallback(){this.classList.add("global-resize"),this.type=this.getAttribute("type"),this.division=this.getAttribute("division"),this.image=this.getAttribute("image"),this.icon=this.getAttribute("icon"),this.text=this.getAttribute("text"),this.secondary=this.getAttribute("secondary"),this.variant=this.getAttribute("variant"),this.rows=this.getAttribute("rows"),this.toggle=this.hasAttribute("toggle"),this.width=this.getAttribute("width"),this.init()}init(){this.type&&("text"==this.type?this._is_text():"button"==this.type?this._is_button():"textarea"==this.type?this._is_textarea():"dropdown"==this.type?this._is_dropdown():"password"==this.type?this._is_password():"color"==this.type&&this._is_color()),this.hasAttribute("blank")&&(this.style.backgroundColor="transparent")}_is_color(){this.classList.add("custom-dropdown-button"),this.innerHTML=`  <div class="custom-button" style="width:100%; margin: 0px !important; cursor:pointer;">\n                                <span class="material-icons">palette</span>\n                                <p>${this.text}</p> \n                            </div>\n                            <div class="color-picker-container"></div>`,this.color_picker_container=this.getElementsByClassName("color-picker-container")[0];var t=this.getElementsByClassName("custom-button")[0];window,t.onclick=()=>{this.color_picker_container.classList.toggle("opened"),this.color_picker_container.innerHTML='<card-item style="margin:0px; padding:0;" nomargin><canvas style="margin:var(--global-margin);"></canvas></card-item>',this.color_picker_container.style["box-shadow"]="5px 5px 5px var(--theme-background-color)";var t=this.getElementsByTagName("canvas")[0];t.getContext("2d"),this.resizeComponents(!0),t.width=this.getBoundingClientRect().width-20,t.height=this.getBoundingClientRect().width-20,this._render_color_map(t),this._draw_middle_rainbow_square(t,0),this._setup_colorwheel_bindings(t)}}_is_text(){this.hasAttribute("number")&&(this.setAttribute("pattern","[0-9]*"),this.setAttribute("inputmode","numeric")),this.setAttribute("contenteditable","true"),this.classList.add("custom-text-input"),this.onkeydown=()=>{setTimeout((()=>{this.value=this.textContent}),200)},onfocus=this.style.webkitTransform="translate3d(0px,-10000px,0)",requestAnimationFrame(function(){this.style.webkitTransform=""}.bind(this))}_is_button(){this.classList.add("custom-button"),this.icon.includes("fa-")?this.innerHTML=`\n                                    <i class="${this.icon}}"></i>\n                                    <p>${this.text}</p> \n                                `:this.innerHTML=`\n                                    <span class="material-icons">${this.icon}</span>\n                                    <p>${this.text}</p> \n                                `,this.addEventListener("click",(()=>{this.classList.toggle("clicked-animation"),this.toggle||setTimeout((()=>{this.classList.toggle("clicked-animation")}),200)}))}_is_textarea(){this.classList.add("custom-text-input"),this.setAttribute("contenteditable","true"),this.rows&&(this.style.height=16*this.rows+20+"px"),this.onkeydown=()=>{setTimeout((()=>{this.value=this.textContent}),200)}}_is_dropdown(){this.icon&&this.text&&(this.classList.add("custom-dropdown-button"),this.innerHTML=`  <div class="custom-button" style="width:100%; margin: 0px !important;">\n                                    <span class="material-icons">${this.icon}</span>\n                                    <p>${this.text}</p> \n                                </div>\n                                <div class="custom-dropdown-button-content"></div>`,this.button=this.getElementsByTagName("div")[0],this.button_text=this.button.getElementsByTagName("p")[0],this.button_icon=this.button.getElementsByTagName("span")[0],this.dropdown_content=this.getElementsByClassName("custom-dropdown-button-content")[0]),this.button.onclick=()=>{this.dropdown_content.classList.toggle("opened")}}_is_password(){this.className="custom-text-input"}_append_dropdown_items(){if(this._items)for(var t=0;t<this._items.length;t++){var e=this._items[t],n=document.createElement("list-item");n.setAttribute("text",e),n.setAttribute("item_number",t),n.setAttribute("icon",""),this.division<=3&&n.setAttribute("icon",this.getAttribute("dropdown_icons")),n.onclick=t=>{this.value=this._items[t.currentTarget.getAttribute("item_number")],this.dropdown_content.classList.toggle("opened")},this.dropdown_content.append(n)}}_render_color_map(t){this._clear_canvas(t);var e=t.getContext("2d"),n=window.getComputedStyle(this).getPropertyValue("--theme-card-color"),i=t.width/2,s=2*Math.PI/360,a=1/i;e.clearRect(0,0,t.width,t.height);for(var o=0;o<360;o+=a){var r=o*s;e.strokeStyle="hsl("+o+", 100%, 50%)",e.beginPath(),e.moveTo(i,i),e.lineTo(i+i*Math.cos(r),i+i*Math.sin(r)),e.stroke()}e.fillStyle=n,e.beginPath(),e.arc(i,i,.8*i,0,2*Math.PI,!0),e.closePath(),e.fill()}_draw_middle_rainbow_square(t,e){for(var n=t.getContext("2d"),i=Math.floor((t.width-100)/2),s=Math.floor((t.height-100)/2),a=s;a<s+100;a++){var o=n.createLinearGradient(i,s,100,0);o.addColorStop(0,"hsl("+e+", 100%, "+(100-a)+"%)"),o.addColorStop(1,"hsl("+e+", 0%, "+(100-a)+"%)"),n.fillStyle=o,n.fillRect(i,a,100,1)}}_setup_colorwheel_bindings(t){var e=t.getContext("2d"),n=this,i="ontouchstart"in window?"touchstart":"click";t.addEventListener(i,(i=>{var s=i.touches?i.layerX:i.offsetX,a=i.touches?i.layerY:i.offsetY,o=e.getImageData(s,a,1,1).data;console.log(o),n.value=`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${o[3]})`,n._render_color_map(t),n._draw_middle_rainbow_square(t,o[0]),n._render_color_map_mouse_circle(t,s,a)}),!1)}_render_color_map_mouse_circle(t,e,n){var i=t.getContext("2d");i.strokeStyle="rgb(255, 255, 255)",i.lineWidth="2",i.beginPath(),i.arc(e,n,10,0,2*Math.PI,!0),i.closePath(),i.stroke()}_clear_canvas(t){var e=window.getComputedStyle(this).getPropertyValue("--theme-card-color"),n=t.getContext("2d");n.fillStyle=e,n.fillRect(0,0,t.width,t.height)}_on_change(t){this.addEventListener("change",(()=>{t(this.value)}))}}),window.customElements.define("pie-chart",class extends E{constructor(){super()}connectedCallback(){this.classList.add("pie-chart","global-resize"),this.innerHTML='  <canvas></canvas>\n                            <div class="legend"></div>',this.style.display="block",this.style.margin="var(--global-margin)",this.parentElement.style.paddingTop=0,this.colors=["#ff6b6b","#ff9f43","#feca57","#1dd1a1","#2e86de","#54a0ff","#5f27cd"],this.canvas=this.getElementsByTagName("canvas")[0],this.legend=this.getElementsByClassName("legend")[0],this.ctx=this.canvas.getContext("2d"),this.data=[]}chartify(t){this.used_colors=[];var e=0;for(var n in t)t[n].total,e==t.length&&this.drawPie(t,7),e++}randomColor(){var t=this.colors[Math.floor(Math.random()*this.colors.length)];return-1!=this.used_colors.indexOf(t)?this.randomColor():(this.used_colors.push(t),t)}drawPie(t,e){var n=this.hasAttribute("legend")?this.getBoundingClientRect().width-50:this.getBoundingClientRect().width,i=0;for(var s in this.half=n/2-1,this.canvas.width=n,this.canvas.height=n,t){var a,o=t[s],r=o.total/e*2*Math.PI;this.ctx.beginPath(),this.ctx.arc(this.half,this.half,this.half,i,i+r),i+=r,this.ctx.lineTo(this.half,this.half),a=o.shade?o.shade:this.randomColor(),this.ctx.fillStyle=a,this.ctx.fill(),this.hasAttribute("legend")&&(this.legend.innerHTML+=`<card-item width="2" style="height:20px; background:${a};"><p style="float:left; width:100%; text-align:center;">a</p></card-item>`)}}}),window.customElements.define("home-view",class extends M{constructor(){super()}connectedCallback(){this.classList.add("view"),window.DP.dispatch("VIEW_LOAD")}}),window.customElements.define("my-day-view",class extends M{constructor(){super()}connectedCallback(){this.classList.add("view"),window.API2.get_day_events((new Date).getDate()).then((t=>{var e=(new Date).getDate(),n=(new Date).getMonth(),i=(new Date).getDay();this.innerHTML=` \n\n            <card-item width="6" style="height:200px;">\n                <h2 style="margin:0; width:100%; text-align:center; float:left; position:absolute; margin-top:var(--global-margin);">${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][i]}</h2>\n                <h1 style="margin:0; width:100%; float:left; position:absolute; text-align:center; height:40px; font-size:40px; margin-top:100px; top:-20px; color:var(--theme-primary-color);">${["January","February","March","April","May","June","July","August","September","October","November","December"][n]}</h1>\n                <h2 style="margin:0; width:100%; text-align:center; float:left; position:absolute; bottom:var(--global-margin); color:var(--theme-primary-color);">${e}<b style="color:var(--theme-secondary-color);">${window.Utils.nth(e)}</b></h2>\n            </card-item>\n\n\n            <card-item width="6" style="height:200px;">\n            </card-item>\n            <custom-input width="4" type="button" icon="settings" text="Settings" onclick="window.history.pushState('','','/Settings')"></custom-input>\n            <custom-input width="4" type="button" icon="info" text="text"></custom-input>\n            <custom-input width="4" type="button" icon="info" text="text"></custom-input>\n            <card-item>\n                <h1 style="width:100%; text-align:center; font-size:20px; color:var(--theme-secondary-color);">Todays Events</h1>\n\n                <card-item width="4" style="height:30px; background:var(--theme-background-color);">\n                    <p style="padding:0px; text-align:center; width:100%; position:absolute; top:8px; margin:0px; height:30px; font-size:13px;">Name</p>\n                </card-item>\n                <card-item width="3" style="height:30px; background:var(--theme-background-color);">\n                    <p style="padding:0px;  text-align:center; width:100%; position:absolute; top:8px; margin:0px; height:30px; font-size:13px;">Start Time</p>\n                </card-item>\n                <card-item width="3" style="height:30px; background:var(--theme-background-color);">\n                    <p style="padding:0px;  text-align:center; width:100%; position:absolute; top:8px; margin:0px; height:30px; font-size:13px;">End Time</p>\n                </card-item>\n                <card-item width="2" style="height:30px; background:var(--theme-background-color);">\n                </card-item>\n\n\n            </card-item>\n\n           `,t.forEach((t=>{this.getElementsByTagName("card-item")[2].innerHTML+=window.Builder.daily_schedule_row_item(t)})),window.DP.dispatch("VIEW_LOAD")}))}}),window.customElements.define("data-view",class extends M{constructor(){super()}connectedCallback(){this.classList.add("view"),window.API2.events_db.then((t=>{window.API2.get_day_events((new Date).getDate()).then((e=>{this.innerHTML=` ${window.Builder.square_card_item(t.length,"Total Events")}\n                                                ${window.Builder.square_card_item(e.length,"Events Today")}\n                                                ${window.Builder.square_card_item("1","Events Left")}\n                                                <custom-input type="button" text="New Event" icon="info" onclick="window.history.pushState('','','/Data/Event/New')"></custom-input>\n                                                <custom-input type="button" text="New Expense" icon="info" onclick="window.history.pushState('','','/Data/Finances/Expenses/New')"></custom-input>\n                                                <custom-input type="button" text="New Income" icon="info" onclick="window.history.pushState('','','/Data/Finances/Income/New')"></custom-input>\n                                                <side-scroller style="width:100%;">    \n                        \n                                                </side-scroller>`,this.getElementsByTagName("side-scroller")[0].root_el.innerHTML+=window.Builder.big_pie_chart_card();var n=[],i=[],s=0;t.length>0?t.forEach((e=>{s++,n[e.type]?n[e.type]={total:n[e.type].total+1}:n[e.type]={total:1},e.days.forEach((t=>{i[t]?i[t]={total:i[t].total+1}:i[t]={total:1}})),s===t.length&&(this.getElementsByTagName("pie-chart")[0].data=n,window.DP.dispatch("VIEW_LOAD"))})):window.DP.dispatch("VIEW_LOAD")}))}))}}),window.customElements.define("schedule-view",class extends M{constructor(){super()}connectedCallback(){this.classList.add("view"),this.innerHTML='\n                                <custom-input type="dropdown" width="12" text="Default" icon="info" dropdown_icons="info"></custom-input>\n                                <custom-calendar>\n                                </custom-calendar>\n                                <card-item style="height:50px;" width="3" blank></card-item>\n                                <card-item style="height:50px;" width="6" blank>\n                                    <p style="padding:0px; margin:0; position:absolute; top:15px; text-align:center; width:100%; height:17px; font-size:17px;" class="day-text"></p>\n                                </card-item>\n                                <card-item style="height:50px;" width="3" blank></card-item>\n                                <card-item width="4" style="height:30px;">\n                                    <p style="padding:0px; text-align:center; width:100%; position:absolute; top:8px; margin:0px; height:30px; font-size:13px;">Name</p>\n                                </card-item>\n                                <card-item width="3" style="height:30px;">\n                                    <p style="padding:0px;  text-align:center; width:100%; position:absolute; top:8px; margin:0px; height:30px; font-size:13px;">Start Time</p>\n                                </card-item>\n                                <card-item width="3" style="height:30px;">\n                                    <p style="padding:0px;  text-align:center; width:100%; position:absolute; top:8px; margin:0px; height:30px; font-size:13px;">End Time</p>\n                                </card-item>\n                                <card-item width="2" style="height:30px;">\n                                </card-item>\n                                <div class="events-container"></div>',this.color_mode="default",this.cal_view=this.getElementsByTagName("custom-input")[0],this.calendar=this.getElementsByTagName("custom-calendar")[0],this.events_container=this.getElementsByClassName("events-container")[0],this.day_text=this.getElementsByClassName("day-text")[0],this.append_daily_schedule(this.calendar.current_day_num),this.calendar.on_date_clicked((t=>{this.append_daily_schedule(t.day_num,"var(--theme-card-color)"),this.apply_highlight_mode(t.day_num),this.day_text.innerHTML=`Events for ${this.calendar.selected_date.day}`})),this.calendar.on_month_changed((t=>{console.log(t),this.day_text.innerHTML=`Events for ${this.calendar.selected_date.day}`,this.apply_highlight_mode(t.day_num)})),this.cal_view.items=["Heatmap","Colormap","Default"],this.cal_view._on_change((t=>{"Heatmap"==t&&(this.color_mode="heatmap"),"Colormap"==t&&(this.color_mode="colormap"),"Default"==t&&(this.color_mode="default"),this.apply_highlight_mode(this.calendar.selected_date)})),window.DP.dispatch("VIEW_LOAD")}apply_highlight_mode(t){"heatmap"==this.color_mode&&this.calendar_highlight_heatmap(),"colormap"==this.color_mode&&this.calendar_highlight_colormap(),"default"==this.color_mode&&(this.calendar.clear_day_highlights(),this.calendar.highlight_day(t,"var(--theme-secondary-color)"))}normalize(t,e,n){return(t-n)/(e-n)}heatMapColor(t){return"hsl("+240*(1-t)+", 100%, 50%)"}heat_map_color(t){var e="#1d4877";return t>=.2&&(e="#1b8a5a"),t>=.4&&(e="#fbb021"),t>=.6&&(e="#f68838"),t>=.8&&(e="#ee3e32"),e}calendar_highlight_heatmap(){(async()=>{for(var t=this.calendar.construct_initial_date_array(),e=1;e<this.calendar.days_in_month+1;e++)await window.API2.get_day_events(String(e)).then((n=>{t[this.calendar.selected_date.month][e]={color:this.heat_map_color(this.normalize(n.length,10,0))}}));this.calendar.highlight_dates(t)})()}calendar_highlight_colormap(){(async()=>{for(var t=this.calendar.construct_initial_date_array(),e=1;e<this.calendar.days_in_month+1;e++)await window.API2.get_day_events(String(e)).then((n=>{console.log(n),null!=n[0]&&(t[this.calendar.selected_date.month][e]={color:n[0].color})}));this.calendar.highlight_dates(t)})()}append_daily_schedule(t){window.API2.get_day_events(t).then((t=>{this.events_container.innerHTML="",t.length>0?t.forEach((t=>{this.events_container.innerHTML+=window.Builder.daily_schedule_row_item(t,"var(--theme-card-color)")})):this.events_container.innerHTML=' <card-item style="height:50px;" width="12">\n                                                        <p style="padding:0px; margin:0; position:absolute; top:15px; text-align:center; width:100%; height:17px; font-size:17px;">No Events Scheduled</p>\n                                                    </card-item>',this.resizeComponents(!0)}))}}),window.customElements.define("daily-brief-view",class extends M{constructor(){super()}connectedCallback(){this.classList.add("view"),window.API2.get_news("Tech").then((t=>{console.log(t),t.forEach((t=>{this.append(this.NewsCard(t.author,t.content,t.description.replace(/(<([^>]+)>)/gi,""),t.publishedAt,t.source,t.title,t.url,t.urlToImage))})),window.DP.dispatch("VIEW_LOAD")}))}NewsCard(t,e,n,i,s,a,o,r){var c=document.createElement("card-item");return c.innerHTML+=`<card-item width="4" image="${r}" square></card-item>\n                        <card-item width="8" style="padding:0; border-radius:0;" blank>\n                            <marquee>\n                                <h5 style="width:100%; text-align:center; margin:0; line-height:16px; font-size:16px; height:16px; color:var(--theme-primary-color);">${a}</h5>\n                            </marquee>\n                            <p style="margin:0; font-size:12px;">${n}</p>\n                        </card-item>\n                        <custom-input onclick="window.location='${o}'" type="button" style="background:var(--theme-background-color);" icon="article" text="Read More"></custom-input>`,c}}),window.customElements.define("event-view",class extends M{constructor(){super()}connectedCallback(){this.classList.add("view"),console.log(window.location.href.split("/")[5]),window.API2.get_event(window.location.href.split("/")[5]).then((t=>{console.log(t),this.innerHTML+=""})),window.DP.dispatch("VIEW_LOAD")}}),window.customElements.define("events-view",class extends M{constructor(){super()}connectedCallback(){this.classList.add("view"),window.DP.dispatch("VIEW_LOAD")}}),window.customElements.define("edit-event-view",class extends M{constructor(){super()}connectedCallback(){this.classList.add("view"),this.event_types=["work","personal","relaxation","smoke break","meeting","birthday"],this.frequencies=["hourly","daily","monthly"],this.colors=["red","orange","yellow","green","blue","indigo","violet"],this.innerHTML='  \n                            <custom-input id="event_name" type="text" placeholder="Event Name" in_row="1"></custom-input>\n                            <custom-input width="6" id="event_type" type="dropdown" text="Type" icon="info" dropdown_icons="info"></custom-input>\n                            <custom-input width="6" id="event_color" type="color" text="Color"></custom-input>\n                            <h5>Start Time</h5>\n                            <custom-input width="2" id="start_time_hour" type="text" placeholder="00" number></custom-input>\n                            <custom-input width="2" id="start_time_minute" type="text" placeholder="00" number></custom-input>\n                            <custom-input width="8" id="start_event_am_pm" type="dropdown"  icon="schedule" dropdown_icons="schedule" text="Select One"></custom-input>\n                            <h5>End Time:</h5>\n                            <custom-input width="2" id="end_time_hour" type="text" placeholder="00" number></custom-input>\n                            <custom-input width="2" id="end_time_minute" type="text" placeholder="00" number></custom-input>\n                            <custom-input width="8" id="end_event_am_pm" type="dropdown" width="6" icon="schedule" dropdown_icons="schedule" text="Select One"></custom-input>\n                            <custom-calendar></custom-calendar>\n                            <h5>Notes:</h5>\n                            <custom-input id="notes" type="textarea" rows="10" placeholder="Some notes..."></custom-input>\n                            <custom-input id="add_event_button" type="button" text="Add Event" icon="add"></custom-input>\n                      ';var t=document.getElementById("event_name"),e=document.getElementById("event_type"),n=document.getElementById("event_color"),i=document.getElementById("start_time_hour"),s=document.getElementById("start_time_minute"),a=document.getElementById("end_time_hour"),o=document.getElementById("end_time_minute"),r=document.getElementById("start_event_am_pm"),c=document.getElementById("end_event_am_pm"),l=this.getElementsByTagName("custom-calendar")[0],d=document.getElementById("add_event_button");e.items=this.event_types,r.items=["AM","PM"],c.items=["AM","PM"],this.selected_days=[],l.on_date_clicked((t=>{var e=t.day_num;console.log(e),this.selected_days.includes(e)?(this.selected_days=this.selected_days.filter((t=>t!==e)),l.clear_day_highlight(e)):(console.log(t),this.selected_days.push(e),l.highlight_day(e,"var(--theme-secondary-color)")),console.log(this.selected_days)})),d.onclick=()=>{if(this.selected_days.length<=0||null==t.value||null==e.value||null==event_color.value||null==i.value||null==s.value||null==r.value||null==a.value||null==o.value||null==c.value)alert("fill all inputs");else{var l="PM"==start_event_am_pm.value?l=String(12+Number(i.value)).concat(s.value):i.value.concat(s.value),d="PM"==end_event_am_pm.value?d=String(12+Number(a.value)).concat(o.value):a.value.concat(o.value);window.API2.new_event(t.value,e.value,l,d,this.selected_days,notes.value,n.value).then((t=>{console.log(t)}))}},window.DP.dispatch("VIEW_LOAD")}}),window.customElements.define("expenses-view",class extends M{constructor(){super()}connectedCallback(){this.classList.add("view"),window.DP.dispatch("VIEW_LOAD")}}),window.customElements.define("income-view",class extends M{constructor(){super()}connectedCallback(){this.classList.add("view"),console.log(window.location.href.split("/")[5]),window.DP.dispatch("VIEW_LOAD")}}),window.customElements.define("settings-view",class extends M{constructor(){super()}connectedCallback(){this.classList.add("view"),this.innerHTML='  <custom-input width="6" type="color" text="Color 1"></custom-input>\n                            <custom-input width="6" type="color" text="Color 2"></custom-input>\n                            <custom-input type="button" icon="info" text="Clear DB"></custom-input>\n                            <input type="color"></input>',window.DP.dispatch("VIEW_LOAD")}}),window.onload=()=>{window.API2.register_service_worker(),function(){var t={"":{title:"Client Commander",view:void 0!==window.localStorage.lastView?window.localStorage.lastView:"<my-day-view></my-day-view>"},MyDay:{title:"My Day",view:"<my-day-view></my-day-view>"},Data:{title:"Data",view:"<data-view></data-view>",subViews:{Events:{title:"Events",view:"<events-view></events-view>"},Finances:{title:"Finances",view:"<finances-view></finances-view>",subViews:{Expenses:{title:"Expenses",view:"<expenses-view></expenses-view>",subViews:{New:{title:"New Expense",view:"<expenses-view></expenses-view>"}}},Income:{title:"Income",view:"<income-view></income-view>",subViews:{New:{title:"New Income",view:"<income-view></income-view>"}}}}},Event:{title:"Event",view:"<event-view></event-view>",subViews:{"*":{title:"Event",view:"<event-view></event-view>"},New:{title:"New Event",view:"<edit-event-view></edit-event-view>"},Edit:{title:"Edit Event",view:"<edit-event-view></edit-event-view>"}}}}},Schedule:{title:"Schedule",view:"<schedule-view></schedule-view>"},DailyBrief:{title:"Daily Brief",view:"<daily-brief-view></daily-brief-view>"},Settings:{title:"Setting",view:"<settings-view></settings-view>"}};window.VM.register(t)}(),window.API2.new_db("events"),window.API2.new_db("views"),window.DP.on("VIEW_LOAD",(()=>{console.log("VIEW LOAD"),window.VM.resize_components(),window.loadingSpinner.hide()})),window.DP.on("API_LOAD",(()=>{console.log("API LOAD"),window.VM.begin(),window.VM.add_bottom_button("public","/DailyBrief"),window.VM.add_bottom_button("account_circle","/MyDay"),window.VM.add_bottom_button("calendar_month","/Schedule"),window.VM.add_bottom_button("source","/Data"),function(){let t=(new Date).getSeconds();setTimeout((()=>{setInterval((()=>{window.API2.events_db.then((t=>{console.log(t);var e=new Date,n=e.getHours()+""+e.getMinutes();t.forEach((t=>{t.start_time,String(n)}))}))}),6e4)}),1e3*(60-t))}()})),window.DP.on("NO_AUTH",(()=>{}))}})();